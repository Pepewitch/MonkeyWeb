$(document).ready(function(){let a=getCookieDict();$('#datetimepicker1').datetimepicker({format:'DD/MM/YYYY',daysOfWeekDisabled:[1,3,5]}),$.post('post/name',{userID:a.monkeyWebUser},function(b){$('#name').append(' '+b.nickname+' '+b.firstname+' '+b.lastname)}),$('#datetimepicker1').on('dp.change',function(){let c=[],d=[],f=[],g=$('.datePicker').data('DateTimePicker').date();$.post('post/studentProfile',{studentID:a.monkeyWebUser}).then(h=>{let j=moment(0);for(let l,k=0;k<h.hybridDay.length;k++)l=moment(h.hybridDay[k].day),j.date(g.date()).month(g.month()).year(g.year()),l.day()===g.day()&&(c.push('FHB: '+h.hybridDay[k].subject),d.push(l.format('H:mm')),j.hour(l.hour()).minute(l.minute()),f.push(j.valueOf()));for(let k=0;k<h.courseID.length;k++)$.post('post/courseInfo',{courseID:h.courseID[k]}).then(l=>{let m=moment(l.day);m.day()===g.day()&&(c.push(l.courseName),d.push(m.format('H:mm')),j.hour(m.hour()).minute(m.minute()),f.push(j.valueOf()),updateBtn(c,d,f))});updateBtn(c,d,f)})}),$('.btn').click(function(){let b=this.className;0>b.indexOf('disabled')&&(0<=b.indexOf('btn-info')?this.className=b.replace('btn-info','btn-primary'):this.className=b.replace('btn-primary','btn-info'))}),$('#submit').click(function(){let b=!0;for(let d,c=0;4>c;c++)d=$('.btn'+(c+1)),0<=d.attr('class').indexOf('btn-primary')&&(b=!1);if(b)alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E30\u0E27\u0E34\u0E0A\u0E32');else if(0>=$('#contact').val().length)alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E43\u0E2A\u0E48\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E41\u0E08\u0E49\u0E07');else if(0>=$('#reason').val().length)alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25');else{$('.modal-body').append('<p>\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E32\u0E15\u0E32\u0E21\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?</p>');for(let d,c=0;4>c;c++)d=$('.btn'+(c+1)),0<=d.attr('class').indexOf('btn-primary')&&$('.modal-body').append('<p>'+d.text()+'</p>');$('#confirmModal').modal()}})});function updateBtn(a,b,c){for(let d=0;4>d;d++)$('.btn'+(d+1)).html('-'),$('.btn'+(d+1)).attr('class','btn btn-default col-xs-12 disabled btn'+(d+1)),$('.btn'+(d+1)).attr('id',''),$('.modal-body').empty();for(let d=0;d<a.length;d++)$('.btn'+(d+1)).html(a[d]+' ('+b[d]+')'),$('.btn'+(d+1)).attr('class','btn btn-info col-xs-12 btn'+(d+1)),$('.btn'+(d+1)).attr('id',c[d]),$('.modal-body').empty()}function sendData(){let a=[],b=getCookieDict();for(let d,c=0;4>c;c++)if(d=$('.btn'+(c+1)),0<=d.attr('class').indexOf('btn-primary')){let f=d.attr('id');a.push(f)}$.post('post/addStudentAbsenceModifier',{studentID:b.monkeyWebUser,day:a,reason:$('#reason').val(),sender:$('#contact').val()}).then(()=>{$('#confirmModal').modal('hide'),location.reload()})}