'use strict';var cookie,selectBtn;$(document).ready(function(){if(deleteCookie('skill'),cookie=getCookieDict(),cookie.courseID?cookie.courseID=JSON.parse(cookie.courseID):self.location='/registrationCourse',$('.sat.disabled,.sun.disabled').removeClass('disabled'),cookie.Hybrid)for(var a in cookie.Hybrid=JSON.parse(cookie.Hybrid),cookie.Hybrid)cookie.Hybrid[a]=JSON.parse(cookie.Hybrid[a]),fillTable(cookie.Hybrid[a],'hybrid');$.post('post/allCourse',{quarter:quarter,year:year},function(b){for(var c in b.course)-1<cookie.courseID.indexOf(b.course[c].courseID)&&fillTable(b.course[c])})});function btntoggle(a){if($(a).hasClass('btn-success'))$($(a).hasClass('M')?'.M':'.E').removeClass('disabled'),$(a).addClass('btn-default').removeClass('btn-success').blur().html($(a).html().split(' ')[0]);else if(!$(a).hasClass('disabled')){selectBtn=a;for(var b=$('#time').children().show(),c=['.00','.30','.00'],d=parseInt($(a).attr('name')),e=0;e<b.length;e++)2==e&&d++,$(b[e]).html(($(a).hasClass('sat')?'Sat ':'Sun ')+d+c[e]+'-'+(d+1)+c[e]+' \u0E19.');'8'==a.name&&($(b[0]).hide(),$(b[1]).hide()),'15'==a.name&&($(b[1]).hide(),$(b[2]).hide()),$('#timeSelect').modal()}}function fillTable(a,b){var c=new Date(a.day);if(6==c.getDay()||0==c.getDay()){var d=$((6==c.getDay()?'.sat':0==c.getDay()?'.sun':'')+'[name="'+c.getHours()+'"]');'hybrid'==b?d.addClass('hybrid').addClass('disabled').html('M'==a.subject?'Math(FHB)':'Physics(FHB)'):d.addClass('course').addClass('disabled').html(a.courseName+'('+a.tutorNicknameEn[0]+')'),$(d[0]).removeClass('col-md-6').addClass('col-md-12').removeClass($(d[0]).hasClass('M')?'M':'E'),$(d[1]).hide()}}function addTime(a){$($(selectBtn).hasClass('M')?'.M':'.E').addClass('disabled'),$(selectBtn).removeClass('btn-default').removeClass('disabled').addClass('btn-success').html($(selectBtn).html()+' '+$(a).html().split(' ')[1])}function next(){var a=$('.sat.btn-success,.sun.btn-success'),b=[];2==a.length&&$(a[0]).html().split(' ')[1]==$(a[1]).html().split(' ')[1]&&$(a[0]).hasClass('sat')==$(a[1]).hasClass('sat')?alert('\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E40\u0E27\u0E25\u0E32\u0E40\u0E23\u0E35\u0E22\u0E19\u0E17\u0E31\u0E1A\u0E01\u0E31\u0E19\u0E44\u0E14\u0E49'):0<a.length?$.post('post/v1/listSkillDayInQuarter',{quarter:quarter,year:year},function(c){for(var e,d=0;d<a.length;d++)for(var f in e=$(a[d]),c){var g=new Date(c[f].day);if(g.getHours()==parseInt(e.html().split(' ')[1].split('-')[0])&&g.getDay()==(e.hasClass('sat')?6:0)&&g.getMinutes()==parseInt(e.html().split(' ')[1].split('-')[0].split('.')[1])){b.push({studentID:cookie.monkeyWebUser,subject:$(a[d]).hasClass('M')?'M':'E',day:moment(0).day($(a[d]).hasClass('sat')?6:0).hour(parseInt(e.html().split(' ')[1].split('-')[0])).minute(parseInt($(a[d]).html().split(' ')[1].split('-')[0].split('.')[1])).valueOf(),btn:a[d].name,text:$(a[d]).html(),skillID:c[f].skillID});break}}writeCookie('skill',JSON.stringify(b)),self.location='/submit'}):0==a.length&&(self.location='/submit')}