var crNum=0;$(document).ready(function(){let a=getCookieDict(),b=a.monkeyWebUser;showPreview(b),$.post("post/studentProfile",{studentID:b}).then(c=>{crInSumm(0,c.courseID)}),$("#submit").click(function(){$.post("post/changeRegistrationState",{studentID:b,registrationState:"transferred",year:year,quarter:quarter},function(c){if(c.err)throw alert("\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E1A\u0E32\u0E07\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E02\u0E36\u0E49\u0E19 \u0E42\u0E1B\u0E23\u0E14\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2DAdmin"),c.err;self.location="studentProfile"})}),$("#file-1").change(function(){upPic(b)})});function crInSumm(a,b){a<b.length?$.post("post/courseInfo",{courseID:b[a]}).then(c=>{c.quarter===quarter&&(crNum+=1),crInSumm(a+1,b)}):$(".money").html("\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19 "+crNum*fee+" \u0E1A\u0E32\u0E17")}function upPic(a){let b=$("#file-1"),c=b.val().split(".").pop().toLowerCase();if(-1===$.inArray(c,["png","jpg","jpeg"]))alert("\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E44\u0E1F\u0E25\u0E4C .jpg, .jpeg \u0E2B\u0E23\u0E37\u0E2D .png \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19");else{let d=b.get(0).files,e=new FormData,f=d[0];e.append("file",f,f.name),e.append("studentID",a),e.append("year",year),e.append("quarter",quarter),$.ajax({url:"post/submitReceipt",type:"POST",data:e,processData:!1,contentType:!1,success:function(){location.reload()}})}}function showPreview(a){let b=a;$.post("post/getConfig").then(c=>{$.get(c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".jpg",function(d,e){"success"===e&&$("#preview").attr("src",c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".jpg")}),$.get(c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".jpeg",function(d,e){"success"===e&&$("#preview").attr("src",c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".jpeg")}),$.get(c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".png",function(d,e){"success"===e&&$("#preview").attr("src",c.receiptPath.slice(c.receiptPath.search("MonkeyWebData")+14)+"CR60Q"+quarter+"/"+b+".png")})})}