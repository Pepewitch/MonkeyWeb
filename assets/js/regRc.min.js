let genHeader=(()=>{var a=_asyncToGenerator(function*(){let[b,c]=yield Promise.all([getConfig(),listQuarter("public")]);for(let d in c.quarter)c.quarter[d].year==year&&c.quarter[d].quarter==quarter&&($("#receiptHead").html("\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E01\u0E32\u0E23\u0E42\u0E2D\u0E19\u0E40\u0E07\u0E34\u0E19\u0E04\u0E2D\u0E23\u0E4C\u0E2A "+c.quarter[d].name),path=b.receiptPath.slice(b.receiptPath.search("MonkeyWebData")+14)+c.quarter[d].name+"/"+ID);loadPreview()});return function(){return a.apply(this,arguments)}})(),genCost=(()=>{var a=_asyncToGenerator(function*(){let b=yield studentProfile(ID),c=[];for(let f in b.courseID)c.push(courseInfo(b.courseID[f]));let d=yield Promise.all(c),e=0;for(let f in d)d[f].year==year&&d[f].quarter==quarter&&(e+=1);12==b.level.slice(0,2)?$(".money").html("\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19 "+e*extraFee+" \u0E1A\u0E32\u0E17"):$(".money").html("\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19 "+e*fee+" \u0E1A\u0E32\u0E17")});return function(){return a.apply(this,arguments)}})(),loadPreview=(()=>{var a=_asyncToGenerator(function*(){$.get(path+".jpg").done(function(){$("#preview").attr("src",path+".jpg")}).fail(function(){$.get(path+".png").done(function(){$("#preview").attr("src",path+".png")}).fail(function(){$.get(path+".jpeg").done(function(){$("#preview").attr("src",path+".jpeg")}).fail(function(){log("can't find picture"),$("#preview").attr("src","images/noImage.svg")})})})});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),j=h.value}catch(k){return void d(k)}return h.done?void c(j):Promise.resolve(j).then(function(k){e("next",k)},function(k){e("throw",k)})}return e("next")})}}let cookie=getCookieDict(),ID="";cookie.monkeyWebUser==void 0?self.location="/login":ID=cookie.monkeyWebUser;let path="";genHeader(),genCost(),$("#file-1").change(function(){uploadImg()}),$("#submit").click(function(){"images/noImage.svg"==$("#preview").attr("src")?alert("\u0E01\u0E23\u0E38\u0E13\u0E32 Upload \u0E43\u0E1A\u0E42\u0E2D\u0E19"):changeRegistrationState(ID,"transferred",{year:year,quarter:quarter}).then(()=>{self.location="/studentProfile"})});function uploadImg(){let a="",b=$("#file-1"),c=b.val().split(".").pop().toLowerCase();if(-1===$.inArray(c,["png","jpg","jpeg"]))alert("\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E44\u0E1F\u0E25\u0E4C .jpg, .jpeg \u0E2B\u0E23\u0E37\u0E2D .png \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19");else{let d=b.get(0).files,e=new FormData,f=d[0];e.append("file[]",f,f.name),a="post/submitReceipt",e.append("studentID",ID),e.append("year",year),e.append("quarter",quarter),$.ajax({url:a,type:"POST",data:e,processData:!1,contentType:!1,success:function(){loadPreview()}})}}