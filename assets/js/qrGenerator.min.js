let requestQR=(()=>{var a=_asyncToGenerator(function*(){let b={subject:$("#subjSelect").val().slice(0,1),ageGroup:$("#subjSelect").val().slice(1),level:$("#seriesSelect").val(),difficulty:$("#difficultSelect").val(),number:1<$("#sheetNumSelect").val().length?$("#sheetNumSelect").val():"0"+$("#sheetNumSelect").val(),rev:$("#revInput").val().slice(0,1),subRev:$("#revInput").val().slice(2)},c=$("#subSeriesSelect").val();""!==c&&(1<c.length?(b.alternative=c.slice(0,1),b.supplement=c.slice(1)):b.alternative=c);let d=yield $.post("post/v1/requestQR",b);generateQR(d)});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),i=h.value}catch(j){return void d(j)}return h.done?void c(i):Promise.resolve(i).then(function(j){e("next",j)},function(j){e("throw",j)})}return e("next")})}}let lastTxt="";$("#hotLabel").hide(),$("#hwLabel").hide(),$("#skLabel").hide(),$("#testLabel").hide();const genPreview=()=>{let a="";a+=$("#subjSelect").val()+"-",a+=$("#seriesSelect").val()+$("#difficultSelect").val(),a+=1<$("#sheetNumSelect").val().length?$("#sheetNumSelect").val():"0"+$("#sheetNumSelect").val(),a+=$("#subSeriesSelect").val(),a+="(rev"+$("#revInput").val()+")",lastTxt=a,$("#previewInput").val(a)};genPreview(),$("#subjSelect").change(function(){genPreview()}),$("#seriesSelect").change(function(){genPreview()}),$("#difficultSelect").change(function(){genPreview()}),$("#sheetNumSelect").change(function(){genPreview()}),$("#subSeriesSelect").change(function(){genPreview()}),$("#revInput").change(function(){genPreview()}),$("#generateButt").click(function(){requestQR()});function generateQR(a){$("#hotLabel").show(),$("#hwLabel").show(),$("#skLabel").show(),$("#testLabel").show(),$("#hotQR").qrcode({width:256,height:256,text:a.hot}),$("#hwQR").qrcode({width:256,height:256,text:a.hw}),$("#skQR").qrcode({width:256,height:256,text:a.skill}),$("#testQR").qrcode({width:256,height:256,text:a.test})}function downloadQR(a,b){let c;c=document.getElementById(a).getElementsByTagName("canvas")[0],log(c);let d=c.toDataURL(),e=document.createElement("a");e.href=d,e.download=b,document.body.appendChild(e),e.click()}$("#hotQR").click(function(){downloadQR(this.id,lastTxt+"hotkey")}),$("#hwQR").click(function(){downloadQR(this.id,lastTxt+"homework")}),$("#skQR").click(function(){downloadQR(this.id,lastTxt+"skill")}),$("#testQR").click(function(){downloadQR(this.id,lastTxt+"test")});