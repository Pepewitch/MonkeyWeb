const courseInf=a=>$.post('post/courseInfo',{courseID:a});$(document).ready(function(){genTable();let a=getCookieDict();$('#id').html(a.monkeyWebUser),showProfilePic(a.monkeyWebUser),$('.profilePic').click(function(){$('#profileModal').modal()}),studentProfile(parseInt(a.monkeyWebUser)).then(f=>{log(f);let g,h,k=$('#statusCr');for(let l in k.html(f.quarter[0].registrationState),void 0===f.quarter[1]?$('#statusSm').html('unregistered'):$('#statusSm').html(f.quarter[1].registrationState),$('#name').html(f.nickname+' '+f.firstname+' '+f.lastname),$('#nameE').html(f.nicknameEn+' '+f.firstnameEn+' '+f.lastnameEn),$('#studentTel').html(f.phone),$('#parentTel').html(f.phoneParent),$('#email').html(f.email),$('#grade').html(()=>{return 6<parseInt(f.grade)?'\u0E21\u0E31\u0E18\u0E22\u0E21 '+(parseInt(f.grade)-6):'\u0E1B\u0E23\u0E30\u0E16\u0E21 '+f.grade}),f.hybridDay){let m=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(f.hybridDay[l].day)).getDay())+' '+new Date(parseInt(f.hybridDay[l].day)).getHours()+'.1');for(let n=0;n<m.length;n++)m[n].className+=' hb',m[n].innerHTML='<strong>FHB :</strong><br>'+fullHBname(f.hybridDay[l].subject)}for(let l in f.skillDay){switch(new Date(parseInt(f.skillDay[l].day)).getHours()){case 9:h='8';break;case 10:case 11:h='10';break;case 13:case 14:h='13';break;case 15:h='15';break;default:}let m=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(f.skillDay[l].day)).getDay())+' '+h+'.1');for(let n=0;n<m.length;n++)-1===m[n].className.indexOf('sk')?(m[n].className+=' sk',g=0===new Date(parseInt(f.skillDay[l].day)).getMinutes()?new Date(parseInt(f.skillDay[l].day)).getHours()+'.00 \u0E19.':new Date(parseInt(f.skillDay[l].day)).getHours()+'.30 \u0E19.',m[n].innerHTML='<strong>SKILL :</strong><br>'+g):(g=m[n].innerHTML.split('<br>')[1].split(' ')[0]<=new Date(parseInt(f.skillDay[l].day)).getHours()+'.'+new Date(parseInt(f.skillDay[l].day)).getMinutes()/100?m[n].innerHTML.split('<br>')[1].split(' ')[0]+'0 \u0E19.':new Date(parseInt(f.skillDay[l].day)).getHours()+'.'+parseInt(new Date(parseInt(f.skillDay[l].day)).getMinutes()/100)+'0 \u0E19.',m[n].innerHTML='<strong>SKILL :</strong><br>'+g)}for(let l in f.courseID)courseInf(f.courseID[l]).then(m=>{let n=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(m.day)).getDay())+' '+new Date(parseInt(m.day)).getHours()+'.1');for(let o=0;o<n.length;o++)n[o].className+=' cr',n[o].innerHTML='<strong>CR :</strong><br>'+m.courseName})});const b=moment('07-01-2017','MM-DD-YYYY');document.getElementById('startCr').innerHTML=b.format('DD MMM YYYY');let c=new Date().getTime(),d=Math.round((c-b)/6.048e8);document.getElementById('nowCr').innerHTML=0>=d?'\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E40\u0E23\u0E34\u0E48\u0E21 CR60Q3':'\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48 '+d+'/14';const e=moment('10-01-2017','MM-DD-YYYY');document.getElementById('endCr').innerHTML=e.format('DD MMM YYYY')});function genTable(){let a=document.getElementsByClassName('disabled');for(let c,b=0;b<a.length;b++){c='';for(let d=0;6>d;d++)c+=a[b].className.split(' ')[d]+' ';a[b].className=c,a[b].innerHTML='&nbsp;<br>&nbsp;'}}function showProfilePic(a){$.post('post/getConfig').then(b=>{$.get(b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.jpg',function(c,d){'success'===d&&$('.profilePic').attr('src',b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.jpg')}),$.get(b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.jpeg',function(c,d){'success'===d&&$('.profilePic').attr('src',b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.jpeg')}),$.get(b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.png',function(c,d){'success'===d&&$('.profilePic').attr('src',b.profilePicturePath.slice(b.receiptPath.search('MonkeyWebData')+14)+a+'.png')})})}function upPic(){let a=getCookieDict(),b=a.monkeyWebUser,c=$('#file-1'),d=c.val().split('.').pop().toLowerCase();if(-1===$.inArray(d,['png','jpg','jpeg']))alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E44\u0E1F\u0E25\u0E4C .jpg, .jpeg \u0E2B\u0E23\u0E37\u0E2D .png \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19');else{let e=c.get(0).files,f=new FormData;f.append('file',e[0],e[0].name),f.append('userID',b),$.ajax({url:'post/updateProfilePicture',type:'POST',data:f,processData:!1,contentType:!1,success:function(){showProfilePic(b),$('#profileModal').modal('hide')}})}}