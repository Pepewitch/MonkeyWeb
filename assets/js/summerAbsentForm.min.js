let getCourse=(()=>{var a=_asyncToGenerator(function*(){let b=getCookieDict(),[c,d]=yield Promise.all([getConfig(),listQuarter("public")]);for(let f in year=c.defaultQuarter.registration.year,quarter=c.defaultQuarter.registration.quarter,d.quarter)d.quarter[f].year===year&&d.quarter[f].quarter===quarter&&$("#absentHeader").html("\u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21\u0E25\u0E32 "+d.quarter[f].name);let e=yield $.post("post/v1/studentTimeTable",{year:year,quarter:quarter,studentID:b.monkeyWebUser});timeTable=e,enableBtn(e)});return function(){return a.apply(this,arguments)}})(),sendData=(()=>{var a=_asyncToGenerator(function*(){let b={},c=getCookieDict(),d=[];b.userID=c.monkeyWebUser,b.reason="SummerAbsent",b.sender=$("#sender").val();for(let f=0;f<$(".btn-danger").length;f++){let g=$(".btn-danger")[f].id,h=moment(0);for(let k in h.date(parseInt(g.slice(1,3))).month(2).year(2018).hour(parseInt(g.slice(-2))),b.date=h.valueOf(),timeTable.course){let l=moment(timeTable.course[k].day);l.hour()===h.hour()&&(b.courseID=timeTable.course[k].courseID)}d.push($.post("post/v1/addStudentAbsent",b))}let e=yield Promise.all(d);log(e),self.location="/registrationReceipt"});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),k=h.value}catch(l){return void d(l)}return h.done?void c(k):Promise.resolve(k).then(function(l){e("next",l)},function(l){e("throw",l)})}return e("next")})}}let year,quarter,timeTable;getCourse();function enableBtn(a){for(let b in a.course){let c=moment(a.course[b].day);$(".btn-"+c.hour()).removeClass("disabled")}}$(".btn-a").click(function(){$(this).hasClass("disabled")||$(this).toggleClass("btn-light btn-danger")}),$(".btn-p").click(function(){$(this).hasClass("disabled")||$(this).toggleClass("btn-light btn-info")}),$("#submit").click(function(){0<$(".btn-danger").length?0<$("#sender").val().length?sendData():alert("\u0E01\u0E23\u0E38\u0E13\u0E32\u0E43\u0E2A\u0E48\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E41\u0E08\u0E49\u0E07"):self.location="/studentProfile"});