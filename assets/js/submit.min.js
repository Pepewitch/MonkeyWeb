var cookie,studentProfile;$(document).ready(function(){if(cookie=getCookieDict(),cookie.courseID?(cookie.courseID=JSON.parse(cookie.courseID),$('#fee').html('\u0E04\u0E48\u0E32\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E04\u0E2D\u0E23\u0E4C\u0E2A : '+fee*cookie.courseID.length+' \u0E1A\u0E32\u0E17')):self.location='/registrationCourse',cookie.Hybrid)for(let a in cookie.Hybrid=JSON.parse(cookie.Hybrid),cookie.Hybrid)cookie.Hybrid[a]=JSON.parse(cookie.Hybrid[a]),fillTable(cookie.Hybrid[a],'hybrid');if($.post('post/allCourse',{quarter:quarter,year:year},a=>{for(let b in a.course)-1<cookie.courseID.indexOf(a.course[b].courseID)&&fillTable(a.course[b])}),cookie.skill)for(let a in cookie.skill=JSON.parse(cookie.skill),cookie.skill)fillTable(cookie.skill[a],'skill');$('#check').change(function(){$('#check').is(':checked')?$('#reason').hide():$('#reason').show()}),$.post('post/studentProfile',{studentID:parseInt(cookie.monkeyWebUser)},a=>{a.err&&(alert('\u0E02\u0E32\u0E14\u0E01\u0E32\u0E23\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E21\u0E15\u0E48\u0E2D\u0E08\u0E32\u0E01\u0E40\u0E0B\u0E34\u0E23\u0E4C\u0E1F\u0E40\u0E27\u0E2D\u0E23\u0E4C \u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07'),self.location='/registrationCourse'),studentProfile=a})});function fillTable(a,b){let c=new Date(a.day);if('skill'==b){let d=$((6==c.getDay()?'.sat':0==c.getDay()?'.sun':2==c.getDay()?'.tue':4==c.getDay()?'.thu':'')+'[name="'+a.btn+'"]');d.hasClass('skill')?d.html(('M'==a.subject?'Math/':'Eng/')+d.html().split(' ')[0]+'(Skill)'):d.addClass('skill').html(a.text)}else if(6==c.getDay()||0==c.getDay()||2==c.getDay()||4==c.getDay()){let d=$((6==c.getDay()?'.sat':0==c.getDay()?'.sun':2==c.getDay()?'.tue':4==c.getDay()?'.thu':'')+'[name="'+c.getHours()+'"]');'hybrid'==b?d.addClass('hybrid').html('M'==a.subject?'Math(FHB)':'Physics(FHB)'):d.addClass('course').html(a.courseName+'('+a.tutorNicknameEn[0]+')')}}function confirm(){var a=[];$('#check').is(':checked')||3<$('#reason').val().length?$.post('post/listConference',{},b=>{var c;for(let d in b)b[d].name.indexOf(6<studentProfile.grade?'s':'p')&&b[d].name.indexOf(6<studentProfile.grade?''+studentProfile.grade-6:''+studentProfile.grade)&&(c=b[d].conferenceID);if(a.push($.post('post/addStudentCourse',{studentID:parseInt(cookie.monkeyWebUser),courseID:cookie.courseID})),cookie.Hybrid)for(let d in cookie.Hybrid)a.push($.post('post/addHybridDay',{studentID:parseInt(cookie.monkeyWebUser),subject:cookie.Hybrid[d].subject,day:cookie.Hybrid[d].day}));if(cookie.skill)for(let d in cookie.skill)a.push($.post('post/addSkillDay',{studentID:parseInt(cookie.monkeyWebUser),subject:cookie.skill[d].subject,day:cookie.skill[d].day}));a.push($.post('post/addStudentToConference',{conferenceID:c,studentID:parseInt(cookie.monkeyWebUser),isAttended:$('#check').is(':checked')})),a.push($.post('post/changeRegistrationState',{studentID:parseInt(cookie.monkeyWebUser),registrationState:'untransferred',quarter:quarter,year:year})),Promise.all(a).then(d=>{for(let e in d)if(d[e].err)throw alert('\u0E01\u0E32\u0E23\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E21\u0E35\u0E1B\u0E31\u0E0D\u0E2B\u0E32 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D Admin'),d[e].err;self.location='/registrationReceipt'})}):alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E40\u0E02\u0E49\u0E32\u0E23\u0E48\u0E27\u0E21\u0E01\u0E32\u0E23\u0E2A\u0E2D\u0E1A\u0E41\u0E25\u0E30\u0E1B\u0E23\u0E30\u0E0A\u0E38\u0E21')}