let genTutorOption=(()=>{var a=_asyncToGenerator(function*(){let b=yield $.post("post/listRandomStudent"),c=[],d=[];for(let f in b.student){let g=b.student[f].studentID+"";0<=g.indexOf("990")&&(c.push(b.student[f].studentID),d.push(name(b.student[f].studentID)))}let e=yield Promise.all(d);for(let f in c)$("#tutorInput").append("<option value="+c[f]+">"+c[f]+" - "+e[f].nicknameEn+"</option>")});return function(){return a.apply(this,arguments)}})(),sendEditProfile=(()=>{var a=_asyncToGenerator(function*(){let b={courseID:crCookie};""!=$("#levelInput").val()&&(b.level=$("#levelInput").val()),""!=$("#desInput").val()&&(b.description=$("#desInput").val()),b.day=$("#dayInput").val(),b.tutor=[$("#tutorInput").val()],b.room=$("#roomInput").val(),log(b),yield $.post("post/editCourse",b),location.reload()});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),j=h.value}catch(k){return void d(k)}return h.done?void c(j):Promise.resolve(j).then(function(k){e("next",k)},function(k){e("throw",k)})}return e("next")})}}const getDateFullName=a=>{return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a]};let crCookie=getCookieDict().monkeyWebAdminAllcourseSelectedCourseID;crCookie===void 0?self.location="/adminAllCourse":courseInfo(crCookie).then(a=>{$("#courseName").html(a.courseName),name(a.tutor[0]).then(d=>{let e="Tutor : "+d.nicknameEn+" ("+d.firstnameEn+")";$("#tutorName").html(e)});let b=moment(a.day);$("#day").html("Day: "+getDateFullName(b.day())),$("#time").html(b.hour()+":00 - "+(b.hour()+2)+":00"),$("#crDescription").html(a.description),$("#courseID").html("CrID: "+crCookie);let c=[];for(let d in a.student)c.push($.post("post/studentProfile",{studentID:a.student[d]}));Promise.all(c).then(d=>{for(let e in d)"active"==d[e].status&&$("#allStudentInCourseTable").append("<tr class='std-row' id='"+a.student[e]+"'><td>"+(parseInt(e)+1)+"</td><td class='text-center'>"+a.student[e]+"</td><td class='text-center'>"+d[e].nickname+"</td><td>"+d[e].firstname+"</td><td>"+d[e].lastname+"</td></tr>")}),$("#levelInput").attr("placeholder",a.level),$("#desInput").attr("placeholder",a.description),$("#dayInput").val(a.day),$("#roomInput").val(a.room),genTutorOption()}),$("#allStudentInCourseTable").on("click",".std-row",function(){writeCookie("monkeyWebAdminAllstudentSelectedUser",this.id),self.location="/adminStudentprofile"}),$("#courseName").click(function(){$("#changeCrInfoModal").modal("show")}),$("#changeCrInfoButt").click(function(){sendEditProfile()});