const getDateName=a=>{return["SUN","MON","TUE","WED","THU","FRI","SAT"][a]},getDateFullName=a=>{return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a]},getLetterGrade=a=>{return 6>=a?"P"+a:"S"+(a-6)};function getAllStudentContent(){"use strict";allStudent.then(a=>{a.err?log("[getAllStudentContent()] : post/allStudent => "+a.err):(log("[getAllStudentContent()] : post/allStudent => "),log(a),generateStudentHtmlTable(filterData(a.student)))})}function filterData(a){let b=document.getElementById("status"),c=document.getElementById("stage"),d=document.getElementById("grade");return"all"!==b.options[b.selectedIndex].value&&(a=a.filter(e=>e.status===b.options[b.selectedIndex].value)),"all"!==c.options[c.selectedIndex].value&&(a=a.filter(e=>e.registrationState===c.options[c.selectedIndex].value)),"all"!==d.options[d.selectedIndex].value&&(a=a.filter(e=>e.grade===parseInt(d.options[d.selectedIndex].value))),a}function generateStudentHtmlTable(a){let b=document.getElementById("allStudentTable");b.innerHTML="";for(let c=0;c<a.length;c++){let d=b.insertRow(c),e=a[c].status;log(e);"terminated"===e?d.setAttribute("class","danger"):"dropped"===e?d.setAttribute("class","warning"):"inactive"===e?d.setAttribute("class","info"):void 0;let f=d.insertCell(0),g=d.insertCell(1),h=d.insertCell(2),k=d.insertCell(3),l=d.insertCell(4),m=d.insertCell(5),n=d.insertCell(6);f.innerHTML="<td>"+(c+1)+"</td>",g.innerHTML="<td>"+a[c].studentID+"</td>",h.innerHTML="<td>"+a[c].nickname+"</td>",k.innerHTML="<td>"+a[c].firstname+"</td>",l.innerHTML="<td>"+a[c].lastname+"</td>",m.innerHTML="<td>"+(a[c].inCourse?"\u2714":"\u2716")+"</td>",n.innerHTML="<td>"+(a[c].inHybrid?"\u2714":"\u2716")+"</td>";d.onclick=(p=>()=>{writeCookie("monkeyWebAdminAllstudentSelectedUser",p.getElementsByTagName("td")[1].innerHTML),self.location="/adminStudentprofile"})(d)}}function getAllCourseContent(){allCourse.then(a=>{a.err?log("[getAllCourseContent()] : post/allCourse => "+a.err):(log("[getAllCourseContent()] : post/allCourse => "),log(a),generateCourseHtmlTable(a.course))})}function generateCourseHtmlTable(a){let b=document.getElementById("allCourseTable");for(let c=0;c<a.length;c++){let d=new Date(a[c].day),e=b.insertRow(c),f=e.insertCell(0),g=e.insertCell(1),h=e.insertCell(2),k=e.insertCell(3),l=e.insertCell(4);e.id=a[c].courseID,f.innerHTML="<td>"+(c+1)+"</td>",g.innerHTML="<td>"+a[c].courseName+"</td>",h.innerHTML="<td>"+getDateName(d.getDay())+"</td>",k.innerHTML="<td>"+d.getHours()+":00 - "+(d.getHours()+2)+":00</td>",name(a[c].tutor[0]).then(n=>{l.innerHTML="<td>"+n.nicknameEn+"</td>"});e.onclick=(n=>()=>{writeCookie("monkeyWebAdminAllcourseSelectedCourseID",n.id),self.location="/adminCoursedescription"})(e)}}function getStudentProfile(){let a=getCookieDict(),b=a.monkeyWebAdminAllstudentSelectedUser;document.getElementById("studentID").innerHTML="ID: "+b,studentProfile(b).then(c=>{return log("[getStudentProfile()] : post/studentProfile => "),log(c),document.getElementById("studentName").innerHTML=c.firstname+" ("+c.nickname+") "+c.lastname,document.getElementById("studentNameEng").innerHTML=c.firstnameEn+" ("+c.nicknameEn+") "+c.lastnameEn,document.getElementById("studentLevel").innerHTML="Grade: "+getLetterGrade(c.grade),document.getElementById("email").innerHTML="e-mail: "+c.email,document.getElementById("phone").innerHTML="phone: "+c.phone,document.getElementById("studentState").innerHTML="STAGE: "+c.registrationState,document.getElementById("studentStatus").innerHTML="STATUS: "+c.status,document.getElementById("thNName").value=c.nickname,document.getElementById("thName").value=c.firstname,document.getElementById("thSName").value=c.lastname,document.getElementById("enNName").value=c.nicknameEn,document.getElementById("enName").value=c.firstnameEn,document.getElementById("enSName").value=c.lastnameEn,document.getElementById("classStudent").value=c.grade,document.getElementById("stageStudent").value=c.registrationState,document.getElementById("statusStudent").value=c.status,document.getElementById("emailStudent").value=c.email,document.getElementById("telStudent").value=c.phone,c}).then(c=>{for(let f=0;f<c.courseID.length;f++)courseInfo(c.courseID[f]).then(g=>{if(g.err)log("[getStudentProfile()] : post/courseInfo => "+g.err);else{log("[getCourseDescription()] : post/courseInfo => "),log(g);let h=new Date(g.day),k=moment(0).day(h.getDay()).hour(h.getHours()).minute(h.getMinutes()).valueOf();document.getElementById(k).innerHTML=g.courseName,document.getElementById(k).value=c.courseID[f],document.getElementById(k).className="btn btn-warning col-md-12"}});log("[getStudentProfile()] All registered course => "),log(c.courseID);let d=c.hybridDay;for(let f=0;f<d.length;f++)document.getElementById(d[f].day).innerHTML="M"===d[f].subject?"FHB : M":"FHB : PH",document.getElementById(d[f].day).className="btn btn-primary col-md-12";let e=c.skillDay;for(let f=0;f<e.length;f++){let g=new Date(e[f].day),h=new Date(e[f].day);30===g.getMinutes()&&g.setMinutes(0),(9===g.getHours()||11===g.getHours()||14===g.getHours()||16===g.getHours())&&g.setHours(g.getHours()-1),log(g.getTime()),document.getElementById(""+g.getTime()).innerHTML="SKILL "+h.getHours()+":"+(0===h.getMinutes()?"00":"30"),document.getElementById(""+g.getTime()).className="btn btn-info col-md-12"}generateImageData()})}function generateImageData(){let a=!1,b=!1,c=parseInt(document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length)),d={id:""+c},e={},f={},g={};studentProfile(c).then(h=>{d.firstname=h.firstname,d.lastname=h.lastname,d.nickname=h.nickname,d.grade=""+h.grade;for(let k=0;k<h.skillDay.length;k++){let l=new Date(h.skillDay[k].day),m=l.getHours();(9===m||11===m||14===m||16===m)&&--m,e[getDateName(l.getDay())+m]={},e[getDateName(l.getDay())+m].courseName="SKILL "+l.getHours()+":"+(0===l.getMinutes()?"00":"30"),e[getDateName(l.getDay())+m].tutor=" "}for(let l,k=0;k<h.hybridDay.length;k++)l=new Date(h.hybridDay[k].day),e[getDateName(l.getDay())+l.getHours()]={},e[getDateName(l.getDay())+l.getHours()].courseName="M"===h.hybridDay[k].subject?"FHB : M":"FHB : PH",e[getDateName(l.getDay())+l.getHours()].tutor="HB","M"===h.hybridDay[k].subject?(f[getDateName(l.getDay())+l.getHours()]="HB",a=!0):(g[getDateName(l.getDay())+l.getHours()]="HB",b=!0);return d.mathMiniTable=f,d.physicsMiniTable=g,h.courseID}).then(h=>{let k=[];for(let l=0;l<h.length;l++)k.push(courseInfo(h[l]));Promise.all(k).then(l=>{let m=[],n=[];for(let p,o=0;o<l.length;o++){p=l[o],n.push(p);let q=new Date(p.day);e[getDateName(q.getDay())+q.getHours()]={},e[getDateName(q.getDay())+q.getHours()].courseName=p.courseName,99000===p.tutor[0]&&("M"===p.courseName[0]?(f[getDateName(q.getDay())+q.getHours()]="CR",a=!0):(g[getDateName(q.getDay())+q.getHours()]="CR",b=!0)),m.push(name(p.tutor[0]))}Promise.all(m).then(o=>{log(o.length);for(let p=0;p<o.length;p++){let q=o[p],r=new Date(n[p].day);e[getDateName(r.getDay())+r.getHours()].tutor=q.nicknameEn}}).then(()=>{d.mainTable=e,d.inMath=a,d.inPhy=b,log("[generateImageData()] : Generated info => "),log(d),showProfilePic(),showReceipt(d),generateImage(d,"math"),generateImage(d,"phy")})})})}function setRegistrationState(a){let b=parseInt(document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length));changeRegistrationState(b,a).then(c=>{c.err?log("[setRegistrationState()] : post/changeRegistrationState => "+c.err):("rejected"!==a&&acceptReject(a),log("[setRegistrationState()] : post/changeRegistrationState => Success"))})}function getCourseDescription(){let a=getCookieDict(),b=a.monkeyWebAdminAllcourseSelectedCourseID;courseInfo(b).then(c=>{if(c.err)log("[getCourseDescription()] : post/courseInfo => "+c.err);else{log("[getCourseDescription()] : post/courseInfo => "),log(c),document.getElementById("courseName").innerHTML=c.courseName,name(c.tutor[0]).then(e=>{document.getElementById("tutorName").innerHTML="Tutor : "+e.nicknameEn});let d=new Date(c.day);return document.getElementById("day").innerHTML="Day : "+getDateFullName(d.getDay()),document.getElementById("time").innerHTML=d.getHours()+":00 - "+(d.getHours()+2)+":00",document.getElementById("courseID").innerHTML=b,c.student}}).then(c=>{let d=document.getElementById("allStudentInCourseTable");for(let e=0;e<c.length;e++){let f=d.insertRow(e),g=f.insertCell(0),h=f.insertCell(1),k=f.insertCell(2),l=f.insertCell(3),m=f.insertCell(4);g.innerHTML="<td>"+(e+1)+"</td>",h.innerHTML="<td>"+c[e]+"</td>",name(c[e]).then(o=>{k.innerHTML="<td>"+o.nickname+"</td>",l.innerHTML="<td>"+o.firstname+"</td>",m.innerHTML="<td>"+o.lastname+"</td>"});f.onclick=(o=>()=>{writeCookie("monkeyWebAdminAllstudentSelectedUser",o.getElementsByTagName("td")[1].innerHTML),self.location="/adminStudentprofile"})(f)}})}function addRemoveCourse(a){let b=document.getElementById(a);"Add Course"===b.innerHTML?allCourse.then(c=>{if(log(c),c.err)log("[addRemoveCourse()] : post/allCourse => "+c.err);else{let d=new Date(parseInt(a)),e=moment(0).day(0===d.getDay()?7:d.getDay()).hour(d.getHours()).valueOf();c.course=c.course.filter(k=>k.day===parseInt(e)),log("[addRemoveCourse()] : data.filter() => "),log(c);let f=document.getElementById("courseSelector");f.value=a,f.innerHTML="";let g=new Date(parseInt(a));if(f.innerHTML+="<option id='"+g.getTime()+"'>FHB : M</option>",f.innerHTML+="<option id='"+g.getTime()+"'>FHB : PH</option>",2!==g.getDay()&&4!==g.getDay())for(let k=0;4>k;k++)f.innerHTML+="<option id='"+g.getTime()+"'>SKILL "+g.getHours()+(0==k%2?":00":":30")+"</option>",g.setMinutes(g.getMinutes()+30);let h=[];for(let k=0;k<c.course.length;k++){let l=c.course[k],m="";m=6<l.grade[0]?"S"+l.grade.map(n=>n-6).join(""):"P"+l.grade.join(""),h.push(name(l.tutor[0]))}Promise.all(h).then(k=>{for(let m,l=0;l<c.course.length;l++)m="",m=6<c.course[l].grade[0]?"S"+c.course[l].grade.map(n=>n-6).join(""):"P"+c.course[l].grade.join(""),f.innerHTML+="<option id='"+c.course[l].courseID+"'>"+c.course[l].subject+m+c.course[l].level+" - "+k[l].nicknameEn+"</option>";$("#addModal").modal()})}}):(document.getElementById("confirmDelete").value=b.value,document.getElementById("courseName").innerHTML=b.innerHTML,document.getElementById("removeModal").value=a,$("#removeModal").modal())}function addCourse(){let a=document.getElementById("courseSelector"),b=parseInt(document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length)),c=a.options[a.selectedIndex],d=c.value;if("SKILL"===d.slice(0,5))addSkillDay(b,c.id).then(e=>{e.err?log("[addCourse()] : post/addSkillDay => "+e.err):(log("[addCourse()] : post/addSkillDay => Success"),location.reload())});else if("FHB"===d.slice(0,3))addHybridDay(b,"M"===d[d.length-1]?"M":"PH",c.id).then(e=>{e.err?log("[addCourse()] : post/addHybridDay => "+e.err):(log("[addCourse()] : post/addHybridDay => Success"),location.reload())});else{let e=c.id;addStudentCourse(b,[e]).then(f=>{f.err?log("[addCourse()] : post/addStudentCourse => "+f.err):(log("[addCourse()] : post/addStudentCourse => Success"),location.reload())})}}function removeCourse(){let a=document.getElementById("confirmDelete"),b=parseInt(document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length)),c=a.value,d=document.getElementById("courseName").innerHTML,e=parseInt(document.getElementById("removeModal").value);if("SKILL"===d.slice(0,5)){let f=new Date(e);f.setMinutes(parseInt(d.slice(d.indexOf(":")+1))),f.setHours(parseInt(d.slice(d.indexOf(" ")+1,d.indexOf(":")))),removeSkillDay(b,f.getTime()).then(g=>{g.err?log("[addCourse()] : post/removeSkillDay => "+g.err):(log("[addCourse()] : post/removeSkillDay => Success"),location.reload())})}else"FHB"===d.slice(0,3)?removeHybridDay(b,e).then(f=>{f.err?log("[addCourse()] : post/removeHybridDay => "+f.err):(log("[addCourse()] : post/removeHybridDay => Success"),location.reload())}):removeStudentCourse(b,[c]).then(f=>{f.err?log("[RemoveCourse()] : post/removeStudentCourse => "+f.err):(log("[RemoveCourse()] : post/removeStudentCourse => Success"),location.reload())})}function editStudent(){let a=parseInt(document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length)),b=(k,l)=>$.post("post/changeStatus",{userID:k,status:l}),c=document.getElementById("classStudent"),d=parseInt(c.options[c.selectedIndex].value),e=document.getElementById("stageStudent"),f=e.options[e.selectedIndex].value,g=document.getElementById("statusStudent"),h=g.options[g.selectedIndex].value;$.post("post/editStudent",{studentID:a,firstname:document.getElementById("thName").value,lastname:document.getElementById("thSName").value,nickname:document.getElementById("thNName").value,firstnameEn:document.getElementById("enName").value,lastnameEn:document.getElementById("enSName").value,nicknameEn:document.getElementById("enNName").value,email:document.getElementById("emailStudent").value,phone:document.getElementById("telStudent").value,grade:d}).then(()=>{return changeRegistrationState(a,f)}).then(()=>{b(a,h).then(()=>{location.reload()})})}function generateImage(a,b){let c=b+"Canvas",d=document.getElementById(c),e=d.getContext("2d");const f=["P1","P2","P3","P4","P5","P6","S1","S2","S3","S4","S5","S6","SAT"],g=["TUE","THU","SAT","SUN"],h=["8-10","10-12","13-15","15-17","17-19"],k=["#ff82d9","#ffa133","#9645cf","#ff2e2e"],l=["#ffffff","#ffffff","#ffffff","#ffffff"],m=["#000000","#000000","#ffffff","#ffffff"],o="border: 1px solid black;border-collapse: collapse;",p="border-bottom: 1px solid lightgrey;border-right: 1px solid black;border-collapse: collapse;",q=["#ff0c18","#ff0c18","#ff0c18","#ff0c18","#ff0c18","#ff0c18","#54ff4a","#54ff4a","#54ff4a","#54ff4a","#54ff4a","#54ff4a","#54ff4a"],r=["8","10","13","15","17"];let s={math8:[],math10:[],math13:[],math15:[],math17:[],phy8:[],phy10:[],phy13:[],phy15:[],phy17:[]};for(let R=0;5>R;R++)for(let S=0;4>S;S++)s["math"+r[R]][S]=void 0===a.mathMiniTable[g[S]+r[R]]?"":a.mathMiniTable[g[S]+r[R]],s["phy"+r[R]][S]=void 0===a.physicsMiniTable[g[S]+r[R]]?"":a.physicsMiniTable[g[S]+r[R]];let t=18<(a.firstname+a.nickname).length?a.firstname:a.firstname+" ("+a.nickname+")",u=18<(a.firstname+a.nickname).length?"("+a.nickname+") "+a.lastname:a.lastname,v="";v+="mathCanvas"==c?"<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"font-size:50px;background-color:"+q[a.grade-1]+"\">"+f[a.grade-1]+"</th><th colspan=\"2\" style=\""+o+"padding-left: 100px;font-size: 18px\">ID : "+a.id+"1</th><th rowspan=\"3\" colspan=\"2\" style=\""+o+"font-size: 18px;\"><p>"+t+"</p><p>"+u+"</p></th><th rowspan=\"15\" style=\""+o+"width: 5px\"></th><th style=\""+o+"height: 30px;width: 40px;background-color: black\"></th>"+loop4(1,1,g,40,k,o)+"</tr>":"<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"font-size:65px;background-color:"+q[a.grade-1]+"\">"+f[a.grade-1]+"</th><th colspan=\"2\" style=\""+o+"padding-left: 100px;font-size: 20px\">ID : "+a.id+"2</th><th rowspan=\"3\" colspan=\"2\" style=\""+o+"font-size: 18px;\"><p>"+t+"</p><p>"+u+"</p></th><th rowspan=\"15\" style=\""+o+"width: 5px\"></th><th style=\""+o+"height: 30px;width: 40px;background-color: black\"></th>"+loop4(1,1,g,40,k,o)+"</tr>";let y="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"\"> </th><th style=\""+o+"height: 30px\">"+h[0]+"</th>"+loop4(2,1,s[b+"8"],40,m,o)+"</tr>",z="<tr><th style=\""+o+"width: 40px;background-color:"+(a.inMath?"#ffc107":"white")+";color: white\">M</th><th style=\""+o+"width: 40px;background-color:"+(a.inPhy?"#9c27b0":"white")+";color: white\">P</th><th style=\""+o+"height: 30px\">"+h[1]+"</th>"+loop4(2,1,s[b+"10"],40,m,o)+"</tr>",A="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"background-color: black\"></th>"+loop4(1,2,g,120,k,o)+"<th style=\""+o+"height: 30px\">"+h[2]+"</th>"+loop4(2,1,s[b+"13"],40,m,o)+"</tr>",B="<tr><th style=\""+o+"height: 30px\">"+h[3]+"</th>"+loop4(2,1,s[b+"15"],40,l,o)+"</tr>",C="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"height: 60px\">"+h[0]+"</th>"+loop4(2,1,tableRow(1,a,g,"8"),120,l,p)+"<th style=\""+o+"height: 30px\">"+h[4]+"</th>"+loop4(2,1,s[b+"17"],40,["#ffffff","#ffffff","#000000","#000000"],o)+"</tr>",D="<tr>"+loop4(2,1,tableRow(2,a,g,"8"),120,l,o)+"<th rowspan=\"2\" colspan=\"5\" style=\""+o+"background-color: #fffb87\">Note : </th></tr>",E="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"height: 60px\">"+h[1]+"</th>"+loop4(2,1,tableRow(1,a,g,"10"),120,l,p)+"</tr>",F="<tr>"+loop4(2,1,tableRow(2,a,g,"10"),120,l,o)+"<th rowspan=\"7\" colspan=\"5\" style=\""+o+"\"></th></tr>",G="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"height: 60px\">"+h[2]+"</th>"+loop4(2,1,tableRow(1,a,g,"13"),120,l,p)+"</tr>",H="<tr>"+loop4(2,1,tableRow(2,a,g,"13"),120,l,o)+"</tr>",I="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"height: 60px\">"+h[3]+"</th>"+loop4(2,1,tableRow(1,a,g,"15"),120,l,p)+"</tr>",J="<tr>"+loop4(2,1,tableRow(2,a,g,"15"),120,l,o)+"</tr>",K="<tr><th rowspan=\"2\" colspan=\"2\" style=\""+o+"height: 60px\">"+h[4]+"</th>"+loop4(2,1,tableRow(1,a,g,"17"),120,l,p)+"</tr>",L="<tr style=\""+o+"\">"+loop4(2,1,tableRow(2,a,g,"17"),120,l,o)+"</tr>",M="<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"790\" height=\"530\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><table style=\"border: 1px solid black;border-collapse: collapse;font-family:\"Itim\", cursive\">"+v+y+z+A+B+C+D+E+F+G+H+I+J+K+L+"</table></div></foreignObject></svg>",N=window.URL||window.webkitURL||window,O=new Image,P=new Blob([M],{type:"image/svg+xml"}),Q=N.createObjectURL(P);O.onload=function(){e.drawImage(O,0,0),N.revokeObjectURL(Q)},O.src=Q,barcode(a)}function loop4(a,b,c,d,e,f){let g="";if(1<b){if(1===a)for(let h=0;4>h;h++)g+="<th rowspan=\""+b+"\" style=\""+f+"text-align:center;width:"+d+"px;background-color:"+e[h]+"\">"+c[h]+"</th>";else for(let h=0;4>h;h++)g+="<td rowspan=\""+b+"\" style=\""+f+"text-align:center;height: 30px;width:"+d+"px;background-color:"+e[h]+"\">"+c[h]+"</td>";}else if(1===a)for(let h=0;4>h;h++)g+="<th style=\""+f+"text-align:center;width:"+d+"px;background-color:"+e[h]+"\">"+c[h]+"</th>";else for(let h=0;4>h;h++)g+="<td style=\""+f+"text-align:center;height: 30px;width:"+d+"px;background-color:"+e[h]+"\">"+c[h]+"</td>";return g}function tableRow(a,b,c,d){let e=["","","",""];for(let f=0;4>f;f++)void 0!==b.mainTable[c[f]+d]&&(e[f]=1===a?b.mainTable[c[f]+d].courseName:b.mainTable[c[f]+d].tutor);return e}function showProfilePic(){let a=document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length);$.get("pic/profile/"+a+".jpg",function(b,c){"success"===c&&$("#profilePic").attr("src","pic/profile/"+a+".jpg")}),$.get("pic/profile/"+a+".jpeg",function(b,c){"success"===c&&$("#profilePic").attr("src","pic/profile/"+a+".jpeg")}),$.get("pic/profile/"+a+".png",function(b,c){"success"===c&&$("#profilePic").attr("src","pic/profile/"+a+".png")})}function showReceipt(a){let b=a.id;$.get("pic/CR60Q3/"+b+".jpg",function(c,d){"success"===d&&$("#imgTrans").attr("src","pic/CR60Q3/"+b+".jpg")}),$.get("pic/CR60Q3/"+b+".jpeg",function(c,d){"success"===d&&$("#imgTrans").attr("src","pic/CR60Q3/"+b+".jpeg")}),$.get("pic/CR60Q3/"+b+".png",function(c,d){"success"===d&&$("#imgTrans").attr("src","pic/CR60Q3/"+b+".png")})}function barcode(a){const b=a.id;JsBarcode("#mathBarcode",b+"1",{lineColor:"black",width:1.7,height:40,displayValue:!1}),JsBarcode("#phyBarcode",b+"2",{lineColor:"black",width:2,height:40,displayValue:!1})}function combineCanvas(a){let b=document.getElementById("combine"),c=b.getContext("2d");c.fillStyle="white",c.fillRect(0,0,b.width,b.height);let d=document.getElementById(a+"Canvas"),e=document.getElementById(a+"Barcode"),f=document.getElementById("profilePic");c.drawImage(d,0,0),c.drawImage(e,189,37);let h=107*f.width/f.height;c.drawImage(f,85,0,h,107)}function acceptReject(a){let b=document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length),c=document.getElementById("appRej"),d=c.getContext("2d"),e=document.getElementById("mathCanvas"),f=document.getElementById("imgTrans");d.fillStyle="white",d.fillRect(0,0,c.width,c.height),"pending"===a?(d.save(),d.drawImage(e,0,-100),d.drawImage(f,90,70,220,165),d.rotate(11*Math.PI/6),d.font="bold 55px Cordia New",d.fillStyle="orange",d.textAlign="center",d.fillText("Pending \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E04\u0E23\u0E39\u0E41\u0E21\u0E27",150,340),d.restore()):"registered"==a&&(d.save(),d.drawImage(e,0,-100),d.drawImage(f,90,70,220,165),d.rotate(11*Math.PI/6),d.font="bold 90px Cordia New",d.fillStyle="green",d.textAlign="center",d.fillText("Approved",150,340),d.restore());let g=c.toDataURL(),h=document.createElement("a");h.href=g,h.download=b+a+".png",document.body.appendChild(h),h.click()}function upPic(){let a=document.getElementById("studentID").innerHTML.slice(4,document.getElementById("studentID").innerHTML.length),b=$("#file-1"),c=b.val().split(".").pop().toLowerCase();if(-1===$.inArray(c,["png","jpg","jpeg"]))alert("\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E44\u0E1F\u0E25\u0E4C .jpg, .jpeg \u0E2B\u0E23\u0E37\u0E2D .png \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19");else{let d=b.get(0).files,e=new FormData;e.append("file",d[0],d[0].name),e.append("userID",a),$.ajax({url:"post/updateProfilePicture",type:"POST",data:e,processData:!1,contentType:!1,success:function(){showProfilePic(),$("#profileModal").modal("hide")}})}}