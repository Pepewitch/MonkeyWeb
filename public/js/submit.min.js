$(document).ready(function(){modal=document.getElementById('id01'),genTable(),updateTable();var a=getCookieDict();a.regisCourse=JSON.parse(a.regisCourse),a.regisHybrid=JSON.parse(a.regisHybrid),a.name=JSON.parse(a.name),a.nameE=JSON.parse(a.nameE),a.tel=JSON.parse(a.tel),console.log(a),$('#name').html(decodeURIComponent(a.name.nname)+' '+decodeURIComponent(a.name.name)+' '+decodeURIComponent(a.name.sname)),$('#nameE').html(decodeURIComponent(a.nameE.nname)+' '+decodeURIComponent(a.nameE.name)+' '+decodeURIComponent(a.nameE.sname)),$('#parentTel').html(a.tel.parent+'(\u0E1C\u0E39\u0E49\u0E1B\u0E01\u0E04\u0E23\u0E2D\u0E07)'),$('#studentTel').html(a.tel.student+'(\u0E19\u0E31\u0E01\u0E40\u0E23\u0E35\u0E22\u0E19)'),$('#email').html(a.email),$('#crFee').html(a.courseFee.slice(0,a.courseFee.length-3)+','+a.courseFee.slice(a.courseFee.length-3,a.courseFee.length)+' \u0E1A\u0E32\u0E17'),$('#grade').html(gradetoText(a.grade));var b='';for(let g in a.regisCourse)!1!==a.regisCourse[g]&&(a.regisCourse[g].day=new Date(a.regisCourse[g].day),99000===a.regisCourse[g].tutor[0]&&(a.regisCourse[g].courseName+='(HB)'),a.regisCourse[g].select&&(b+=numtoDay(a.regisCourse[g].day.getDay())+' '+a.regisCourse[g].day.getHours()+'.00-'+(a.regisCourse[g].day.getHours()+2)+'.00 \u0E19. : '+a.regisCourse[g].courseName+'<br>'));$('#cr').html(b);var c='';for(let g in a.regisHybrid)if(!1!==a.regisHybrid[g]&&(a.regisHybrid[g].day=new Date(a.regisHybrid[g].day),c+=numtoDay(a.regisHybrid[g].day.getDay())+' '+a.regisHybrid[g].day.getHours()+'.00-'+(a.regisHybrid[g].day.getHours()+2)+'.00 \u0E19. : '+fullHBname(a.regisHybrid[g].subject)+'<br>',6===a.regisHybrid[g].day.getDay())){var d=a.regisHybrid[g].day.getHours();for(j=-1;4>j;j++){var e=10*d+5*j;$('#skilltime').find('option[value='+e+']').parent().is('span')||$('#skilltime,#skilltimeEng').find('option[value='+e+']').wrap('<span>')}}$('#hb').html(c);var f='';'4'==a.skillSel?f+='Complete':('2'===$('#station').val()?f+='MATH : \u0E2A\u0E32\u0E22 3 <br>':'0'!==$('#skilltime').val()&&(f+=$('#skillday').val()+' '+$('#skilltime option:selected').html()+' \u0E19. : MATH <br>'),'2'===$('#stationEng').val()?f+='ENG : \u0E2A\u0E32\u0E22 3 <br>':'0'!==$('#skilltimeEng').val()&&(f+=$('#skilldayEng').val()+' '+$('#skilltimeEng option:selected').html()+' \u0E19. : ENG <br>')),$('#sk').html(f),0===$('#hb').html().length&&$('#hb').html('\u0E44\u0E21\u0E48\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E43\u0E19\u0E23\u0E30\u0E1A\u0E1A FHB')});function genTable(){var a=document.getElementsByClassName('disabled');for(let c=0;c<a.length;c++){var b='';for(let d=0;6>d;d++)b+=a[c].className.split(' ')[d]+' ';a[c].className=b,a[c].innerHTML='&nbsp;<br>&nbsp;'}}function updateTable(){var a=getCookieDict();for(let m in a.regisCourse=JSON.parse(a.regisCourse),a.regisHybrid=JSON.parse(a.regisHybrid),'4'!=a.skillSel&&(a.regisSkill=JSON.parse(a.regisSkill),$('#skilltime').val(a.regisSkill.M.time),$('#station').val(a.regisSkill.M.station),$('#skillday').val(a.regisSkill.M.day),$('#skilltimeEng').val(a.regisSkill.E.time),$('#stationEng').val(a.regisSkill.E.station),$('#skilldayEng').val(a.regisSkill.E.day)),a.regisCourse)if(!1!==a.regisCourse[m]){a.regisCourse[m].day=new Date(a.regisCourse[m].day),99000===a.regisCourse[m].tutor[0]&&(a.regisCourse[m].courseName+='(HB)');var b;if(6===a.regisCourse[m].day.getDay()&&!0===a.regisCourse[m].select){b=document.getElementsByClassName('btn-sat '+a.regisCourse[m].day.getHours()+'.1');for(let n=0;n<b.length;n++)b[n].className+=' cr',b[n].innerHTML='<strong>CR :</strong><br>'+a.regisCourse[m].courseName}if(0===a.regisCourse[m].day.getDay()&&!0===a.regisCourse[m].select){b=document.getElementsByClassName('btn-sun '+a.regisCourse[m].day.getHours()+'.1');for(let n=0;n<b.length;n++)b[n].className+=' cr',b[n].innerHTML='<strong>CR :</strong><br>'+a.regisCourse[m].courseName}}for(let m in a.regisHybrid)if(!1!==a.regisHybrid[m]){a.regisHybrid[m].day=new Date(a.regisHybrid[m].day);var c=['sat','sun','tue','thu'],d=[6,0,2,4];for(let n=0;4>n;n++)if(a.regisHybrid[m].day.getDay()===d[n]){var e=document.getElementsByClassName('btn-'+c[n]+' '+a.regisHybrid[m].day.getHours()+'.1');for(let o=0;o<e.length;o++)e[o].className+=' hb',e[o].innerHTML='<strong>FHB :</strong><br>'+fullHBname(a.regisHybrid[m].subject)}}if('1'==$('#station').val()&&'0'!=$('#skilltime').val()){var f=[8,10,13,15];for(i=0;i<f.length;i++)if(Math.floor(parseInt($('#skilltime').val())/10)==f[i]||Math.floor(parseInt($('#skilltime').val())/10)-1==f[i]){var g=document.getElementsByClassName('btn-'+$('#skillday').val()+' '+f[i]+'.1');for(let m=0;m<g.length;m++)if(-1!=g[m].className.indexOf('sk')){if(parseInt($('#skilltimeEng option:selected').val())<=parseInt($('#skilltime option:selected').val()))var h=$('#skilltimeEng option:selected').text().split('-')[0];else if('0'!=$('skilltime').val())var h=$('#skilltime option:selected').text().split('-')[0];else var h=$('#skilltimeEng option:selected').text().split('-')[0];g[m].innerHTM='<strong>SKILL :</strong><br>'+h+' \u0E19.'}else g[m].className+=' sk',g[m].innerHTML='<strong>SKILL :</strong><br>'+$('#skilltime option:selected').text().split('-')[0]+' \u0E19.'}}if('1'==$('#stationEng').val()&&'0'!=$('#skilltimeEng').val()){var f=[8,10,13,15];for(i=0;i<f.length;i++)if(Math.floor(parseInt($('#skilltimeEng').val())/10)==f[i]||Math.floor(parseInt($('#skilltimeEng').val())/10)-1==f[i]){var l=document.getElementsByClassName('btn-'+$('#skilldayEng').val()+' '+f[i]+'.1');for(let m=0;m<l.length;m++)if(-1!=l[m].className.indexOf('sk')){if(parseInt($('#skilltimeEng option:selected').val())<=parseInt($('#skilltime option:selected').val()))var h=$('#skilltimeEng option:selected').text().split('-')[0];else if('0'!=$('skilltime').val())var h=$('#skilltime option:selected').text().split('-')[0];else var h=$('#skilltimeEng option:selected').text().split('-')[0];l[m].innerHTML='<strong>SKILL :</strong><br>'+h+' \u0E19.'}else l[m].className+=' sk',l[m].innerHTML='<strong>SKILL :</strong><br>'+$('#skilltimeEng option:selected').text().split('-')[0]+' \u0E19.'}}}function back(){var a=getCookieDict();self.location='4'==a.skillSel?'registrationSkill':'registrationSkill2'}window.onclick=function(a){a.target===modal&&(modal.style.display='none')};function notsubmit(){modal.style.display='none'}function submit(){var a=getCookieDict();a.regisCourse=JSON.parse(a.regisCourse),a.regisHybrid=JSON.parse(a.regisHybrid),a.name=JSON.parse(a.name),a.nameE=JSON.parse(a.nameE),a.tel=JSON.parse(a.tel),$.post('post/editStudent',{studentID:parseInt(a.monkeyWebUser),firstname:decodeURIComponent(a.name.name),lastname:decodeURIComponent(a.name.sname),nickname:decodeURIComponent(a.name.nname),firstnameEn:decodeURIComponent(a.nameE.name),lastnameEn:decodeURIComponent(a.nameE.sname),nicknameEn:decodeURIComponent(a.nameE.nname),email:a.email,phone:a.tel.student,grade:parseInt(a.grade),phoneParent:a.tel.parent},function(b){if(b.err)alert('Something went wrong! please try again');else{var c=[];for(let d in a.regisCourse)!1!==a.regisCourse[d]&&!0===a.regisCourse[d].select&&c.push(a.regisCourse[d].courseID);$.post('post/addStudentCourse',{studentID:parseInt(a.monkeyWebUser),courseID:c},function(d){if(d.err)alert('Something went wrong! please try again');else{for(let f in a.regisHybrid)!1!==a.regisHybrid[f]&&$.post('post/addHybridDay',{studentID:parseInt(a.monkeyWebUser),subject:a.regisHybrid[f].subject,day:a.regisHybrid[f].day},function(g){g.err&&alert('Something went wrong! please try again')});'0'!==$('#skilltime').val()&&$.post('post/addSkillDay',{studentID:parseInt(a.monkeyWebUser),subject:'M',day:moment(0).day(daytoNum($('#skillday').val())).hour(Math.floor(parseInt($('#skilltime').val())/10)).minute(6*(parseInt($('#skilltime').val())%10)).valueOf()},function(f){f.err&&alert('Something went wrong! please try again')}),'0'!==$('#skilltimeEng').val()&&$.post('post/addSkillDay',{studentID:parseInt(a.monkeyWebUser),subject:'E',day:moment(0).day(daytoNum($('#skilldayEng').val())).hour(Math.floor(parseInt($('#skilltimeEng').val())/10)).minute(6*(parseInt($('#skilltimeEng').val())%10)).valueOf()},function(f){f.err&&alert('Something went wrong! please try again')});((f,g)=>$.post('post/changeStatus',{userID:f,status:g}))(parseInt(a.monkeyWebUser),status).then(()=>{alert('\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E2A\u0E34\u0E49\u0E19'),self.location='registrationReceipt'})}})}})}