const courseInf=a=>$.post('post/courseInfo',{courseID:a});$(document).ready(function(){genTable();let a=getCookieDict();$('#id').html(a.monkeyWebUser),showProfilePic(a.monkeyWebUser),$('.profilePic').click(function(){$('#profileModal').modal()}),studentProfile(parseInt(a.monkeyWebUser)).then(b=>{let c,d,e=$('#status');switch(b.registrationState){case'untransferred':e.html('\u0E23\u0E2D\u0E43\u0E1A\u0E42\u0E2D\u0E19');break;case'transferred':e.html('\u0E42\u0E2D\u0E19\u0E40\u0E07\u0E34\u0E19\u0E41\u0E25\u0E49\u0E27');break;case'pending':e.html('\u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1E\u0E34\u0E08\u0E32\u0E23\u0E13\u0E32');break;case'registered':e.html('\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E2A\u0E21\u0E1A\u0E39\u0E23\u0E13\u0E4C');}for(let f in $('#name').html(b.nickname+' '+b.firstname+' '+b.lastname),$('#nameE').html(b.nicknameEn+' '+b.firstnameEn+' '+b.lastnameEn),$('#studentTel').html(b.phone),$('#parentTel').html(b.phoneParent),$('#email').html(b.email),$('#grade').html(()=>{return 6<parseInt(b.grade)?'\u0E21\u0E31\u0E18\u0E22\u0E21 '+(parseInt(b.grade)-6):'\u0E1B\u0E23\u0E30\u0E16\u0E21 '+b.grade}),b.hybridDay){let g=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(b.hybridDay[f].day)).getDay())+' '+new Date(parseInt(b.hybridDay[f].day)).getHours()+'.1');for(let h=0;h<g.length;h++)g[h].className+=' hb',g[h].innerHTML='<strong>FHB :</strong><br>'+fullHBname(b.hybridDay[f].subject)}for(let f in b.skillDay){switch(new Date(parseInt(b.skillDay[f].day)).getHours()){case 9:d='8';break;case 10:case 11:d='10';break;case 13:case 14:d='13';break;case 15:d='15';break;default:}let g=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(b.skillDay[f].day)).getDay())+' '+d+'.1');for(let h=0;h<g.length;h++)-1===g[h].className.indexOf('sk')?(g[h].className+=' sk',c=0===new Date(parseInt(b.skillDay[f].day)).getMinutes()?new Date(parseInt(b.skillDay[f].day)).getHours()+'.00 \u0E19.':new Date(parseInt(b.skillDay[f].day)).getHours()+'.30 \u0E19.',g[h].innerHTML='<strong>SKILL :</strong><br>'+c):(c=g[h].innerHTML.split('<br>')[1].split(' ')[0]<=new Date(parseInt(b.skillDay[f].day)).getHours()+'.'+new Date(parseInt(b.skillDay[f].day)).getMinutes()/100?g[h].innerHTML.split('<br>')[1].split(' ')[0]+'0 \u0E19.':new Date(parseInt(b.skillDay[f].day)).getHours()+'.'+parseInt(new Date(parseInt(b.skillDay[f].day)).getMinutes()/100)+'0 \u0E19.',g[h].innerHTML='<strong>SKILL :</strong><br>'+c)}for(let f in b.courseID)courseInf(b.courseID[f]).then(g=>{let h=document.getElementsByClassName('btn-'+numtoDay(new Date(parseInt(g.day)).getDay())+' '+new Date(parseInt(g.day)).getHours()+'.1');for(let k=0;k<h.length;k++)h[k].className+=' cr',h[k].innerHTML='<strong>CR :</strong><br>'+g.courseName})})});function genTable(){let a=document.getElementsByClassName('disabled');for(let c,b=0;b<a.length;b++){c='';for(let d=0;6>d;d++)c+=a[b].className.split(' ')[d]+' ';a[b].className=c,a[b].innerHTML='&nbsp;<br>&nbsp;'}}function showProfilePic(a){$.get('pic/profile/'+a+'.jpg',function(b,c){'success'===c&&$('.profilePic').attr('src','pic/profile/'+a+'.jpg')}),$.get('pic/profile/'+a+'.jpeg',function(b,c){'success'===c&&$('.profilePic').attr('src','pic/profile/'+a+'.jpeg')}),$.get('pic/profile/'+a+'.png',function(b,c){'success'===c&&$('.profilePic').attr('src','pic/profile/'+a+'.png')})}function upPic(){let a=getCookieDict(),b=a.monkeyWebUser,c=$('#file-1'),d=c.val().split('.').pop().toLowerCase();if(-1===$.inArray(d,['png','jpg','jpeg']))alert('\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E44\u0E1F\u0E25\u0E4C .jpg, .jpeg \u0E2B\u0E23\u0E37\u0E2D .png \u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19');else{let e=c.get(0).files,f=new FormData;f.append('file',e[0],e[0].name),f.append('userID',b),$.ajax({url:'post/updateProfilePicture',type:'POST',data:f,processData:!1,contentType:!1,success:function(){showProfilePic(b),$('#profileModal').modal('hide')}})}}